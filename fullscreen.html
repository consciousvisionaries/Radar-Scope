<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="60"> <!-- Refresh the page every 60 seconds -->
<title>Digital Radar Scope</title>
<style>
  /* Previous CSS, ensure it's included for styling */
  .point {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #ff0;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }
</style>
</head>
<body>
<div id="feed">GPS Coordinates:</div>
<div id="radarContainer">
  <div id="radar">
    <div id="sweep"></div>
    <!-- Points will be dynamically added here -->
  </div>
</div>
<script>
function generateRandomCoordinates() {
  let coordinates = [];
  for (let i = 0; i < 10; i++) { // Generate 10 random coordinates
    let latitude = (Math.random() * 180 - 90).toFixed(5);
    let longitude = (Math.random() * 360 - 180).toFixed(5);
    coordinates.push({latitude, longitude});
  }
  return coordinates;
}

function plotCoordinates(coordinates) {
  const radar = document.getElementById('radar');
  radar.innerHTML = '<div id="sweep"></div>'; // Clear existing points but keep the sweep
  coordinates.forEach(coord => {
    const point = document.createElement('div');
    point.className = 'point';
    // Simplified model for demonstration: mapping latitude (0 at center to 90 at edge) and ignoring longitude
    const distanceFromCenter = (90 - Math.abs(coord.latitude)) / 90;
    const radarRadius = radar.offsetWidth / 2;
    const angle = (coord.longitude + 180) * Math.PI / 180; // Convert longitude to radians
    const x = radarRadius + radarRadius * distanceFromCenter * Math.cos(angle) - 5; // Adjust for point size
    const y = radarRadius + radarRadius * distanceFromCenter * Math.sin(angle) - 5; // Adjust for point size
    point.style.left = `${x}px`;
    point.style.top = `${y}px`;
    radar.appendChild(point);
  });
}

function updateFeedAndRadar() {
  let coordinates = generateRandomCoordinates();
  let feedElement = document.getElementById('feed');
  feedElement.innerHTML = 'GPS Coordinates:<br>'; // Reset feed content
  coordinates.forEach(coord => {
    feedElement.innerHTML += `Lat: ${coord.latitude}, Lon: ${coord.longitude}<br>`;
  });
  plotCoordinates(coordinates);
}

setInterval(updateFeedAndRadar, 4000); // Update coordinates and radar every 4 seconds
</script>
</body>
</html>
